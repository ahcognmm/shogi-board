(this["webpackJsonpshogi-board"]=this["webpackJsonpshogi-board"]||[]).push([[0],{35:function(e,t,n){e.exports=n(89)},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var r,a,o,c,i,u,s,l,p,f,m,v,h,b,d,w=n(31),k=n.n(w),y=(n(36),n(0)),g=n.n(y),O=n(19),j=n.n(O),E=n(4),x=n(1),C=n.n(x),N=n(5),S=n(6),T=n(7),R=n(8),P=n(3),M=(n(12),n(2)),L=n(11),U=n.n(L),I=(r=function(){function e(){Object(T.a)(this,e),Object(S.a)(this,"paintTargets",a,this),Object(S.a)(this,"serverURL",o,this),Object(S.a)(this,"saveToCookie",c,this),this.keys={paintTargets:"paintTargets",serverURL:"serverURL",saveToCookie:"saveToCookie"},this.expire={expires:31536e3},this.paintTargets=!("false"===U.a.get(this.keys.paintTargets)),this.serverURL=U.a.get(this.keys.serverURL)||"",this.saveToCookie="true"===U.a.get(this.keys.saveToCookie)}return Object(R.a)(e,[{key:"setPaintTargets",value:function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.paintTargets=t,this.saveToCookie&&U.a.set(this.keys.paintTargets,String(t),this.expire);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setServerURL",value:function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.serverURL=t,this.saveToCookie&&U.a.set(this.keys.serverURL,t,this.expire);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setSaveToCookie",value:function(){var e=Object(N.a)(C.a.mark((function e(t){var n,r,a,o,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.saveToCookie=t,!this.saveToCookie){e.next=8;break}return n=this.keys,r=n.saveToCookie,a=n.serverURL,o=n.paintTargets,c=this.expire,U.a.set(r,String(t),c),U.a.set(a,this.serverURL,c),U.a.set(o,String(this.paintTargets),c),e.abrupt("return");case 8:Object.values(this.keys).forEach((function(e){return U.a.remove(e)}));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),a=Object(P.a)(r.prototype,"paintTargets",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o=Object(P.a)(r.prototype,"serverURL",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=Object(P.a)(r.prototype,"saveToCookie",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(P.a)(r.prototype,"setPaintTargets",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"setPaintTargets"),r.prototype),Object(P.a)(r.prototype,"setServerURL",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"setServerURL"),r.prototype),Object(P.a)(r.prototype,"setSaveToCookie",[M.action],Object.getOwnPropertyDescriptor(r.prototype,"setSaveToCookie"),r.prototype),r),V=(i=function(){function e(){Object(T.a)(this,e),Object(S.a)(this,"mockup",u,this)}return Object(R.a)(e,[{key:"setMockupState",value:function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.mockup=t;case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"closeMockup",value:function(){var e=Object(N.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.mockup=1;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),u=Object(P.a)(i.prototype,"mockup",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Object(P.a)(i.prototype,"setMockupState",[M.action],Object.getOwnPropertyDescriptor(i.prototype,"setMockupState"),i.prototype),Object(P.a)(i.prototype,"closeMockup",[M.action],Object.getOwnPropertyDescriptor(i.prototype,"closeMockup"),i.prototype),i),D=n(10),z=n(18),F=n.n(z),B=n(20),A=n.n(B),K=n(32),_=n.n(K);function W(e,t,n){if(8===t||-8===t||t>10)throw new Error("Piece ID of Captures must not be Gyoku or over 10.");return e.map((function(e,r){if(r!==t-1)return e;var a=n(e);if(a<0)throw new Error("Invalid function call. Captures must not contain negative value.");return a}))}function G(e){return e>0?e+10:e-10}function q(e){return Math.abs(e)<10?e:e<0?e+10:e-10}function J(e){if(-1===e.sourceRow)return!1;var t=0!==e.piece&&5!==Math.abs(e.piece)&&Math.abs(e.piece)<=7,n=e.piece>0?[0,1,2]:[6,7,8],r=n.includes(e.sourceRow)||n.includes(e.destRow);return t&&r}function H(e){var t=function(t,n){if(e.pos.turn!==n)return t.slice();var r=e.pos.pos[e.dest.row][e.dest.column];return r*n<0?function(e,t){return W(e,Math.abs(t),(function(e){return e+1}))}(t,q(r)):-1===e.source.row&&-1===e.source.column?function(e,t){return W(e,Math.abs(t),(function(e){return e-1}))}(t,e.piece):t.slice()},n=t(e.pos.cap0,1),r=t(e.pos.cap1,-1);return{pos:Q(e),cap0:n,cap1:r,turn:-e.pos.turn,moveCount:e.pos.moveCount+1}}function $(e){return{pos:Q(e),cap0:e.pos.cap0.slice(),cap1:e.pos.cap1.slice(),turn:-e.pos.turn,moveCount:e.pos.moveCount+1}}function Q(e){return e.pos.pos.map((function(t,n){return t.map((function(t,r){return e.source.row===n&&e.source.column===r?0:e.dest.row===n&&e.dest.column===r?e.piece:t}))}))}var X,Y,Z,ee,te,ne,re,ae=function(){function e(t){Object(T.a)(this,e),this.name=void 0,this.name=t}return Object(R.a)(e,[{key:"setValue",value:function(e){}}]),e}(),oe=(s=function(){function e(t,n,r){Object(T.a)(this,e),Object(S.a)(this,"value",l,this),this.name=void 0,this.default=void 0,this.name=t,this.value=n,this.default=r}return Object(R.a)(e,[{key:"setValue",value:function(e){this.value=e}}]),e}(),l=Object(P.a)(s.prototype,"value",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(P.a)(s.prototype,"setValue",[M.action],Object.getOwnPropertyDescriptor(s.prototype,"setValue"),s.prototype),s),ce=(p=function(){function e(t,n,r,a,o){Object(T.a)(this,e),Object(S.a)(this,"value",f,this),Object(S.a)(this,"inputValue",m,this),this.name=void 0,this.default=void 0,this.min=void 0,this.max=void 0,this.name=t,this.value=n,this.inputValue=n.toString(),this.default=r,this.min=a,this.max=o}return Object(R.a)(e,[{key:"setValue",value:function(e){this.inputValue=e;var t=Number(this.inputValue);Number.isNaN(t)||t<this.min||t>this.max||(this.value=t)}}]),e}(),f=Object(P.a)(p.prototype,"value",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=Object(P.a)(p.prototype,"inputValue",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(P.a)(p.prototype,"setValue",[M.action],Object.getOwnPropertyDescriptor(p.prototype,"setValue"),p.prototype),p),ie=(v=function(){function e(t,n,r,a){Object(T.a)(this,e),Object(S.a)(this,"value",h,this),this.name=void 0,this.default=void 0,this.vars=void 0,this.name=t,this.value=n,this.default=r,this.vars=a}return Object(R.a)(e,[{key:"setValue",value:function(e){this.value=e}}]),e}(),h=Object(P.a)(v.prototype,"value",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(P.a)(v.prototype,"setValue",[M.action],Object.getOwnPropertyDescriptor(v.prototype,"setValue"),v.prototype),v),ue=(b=function(){function e(t,n,r){Object(T.a)(this,e),Object(S.a)(this,"value",d,this),this.name=void 0,this.default=void 0,this.name=t,this.value=n,this.default=r}return Object(R.a)(e,[{key:"setValue",value:function(e){this.value=e}}]),e}(),d=Object(P.a)(b.prototype,"value",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Object(P.a)(b.prototype,"setValue",[M.action],Object.getOwnPropertyDescriptor(b.prototype,"setValue"),b.prototype),b),se=function(){function e(t,n){var r=this;Object(T.a)(this,e),this._engineName=void 0,this._serverURL=void 0,this.engineNameKey="key",this.updateRange=A()(function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.post("options/update/range",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),1e3),this.updateText=A()(function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.post("options/update/text",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),1e3),this._engineName=t,this._serverURL=n}return Object(R.a)(e,[{key:"init",value:function(){var e=Object(N.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.buildUrl("init",!1);case 2:return t=e.sent,e.next=5,F.a.post(t);case 5:return n=e.sent,e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=Object(N.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("connect");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e=Object(N.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("close");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"start",value:function(){var e=Object(N.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("start");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Object(N.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("stop");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getOptions",value:function(){var e=Object(N.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("options/get");case 2:return t=e.sent,n={buttons:new Map,checks:new Map,ranges:new Map,selects:new Map,texts:new Map},Object.values(t.buttons).forEach((function(e){return n.buttons.set(e.name,new ae(e.name))})),Object.values(t.checks).forEach((function(e){return n.checks.set(e.name,new oe(e.name,e.value,e.default))})),Object.values(t.ranges).forEach((function(e){return n.ranges.set(e.name,new ce(e.name,e.value,e.default,e.min,e.max))})),Object.values(t.selects).forEach((function(e){return n.selects.set(e.name,new ie(e.name,e.value,e.default,e.vars))})),Object.values(t.texts).forEach((function(e){return n.texts.set(e.name,new ue(e.name,e.value,e.default))})),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateButton",value:function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("options/update/button",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCheck",value:function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("options/update/check",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateSelect",value:function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.post("options/update/select",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getResult",value:function(){var e=Object(N.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get("result/get");case 2:return n=e.sent,r=t.pos,e.abrupt("return",Object.entries(n).sort((function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0})).map((function(e){var n=Object(D.a)(e,2),a=(n[0],n[1]),o=0;r=t.pos;var c=[];try{for(;o<a.moves.length;){var i=a.moves[o],u={row:i.source.row,column:i.source.column},s={row:i.dest.row,column:i.dest.column},l=i.pieceId||r.pos[u.row][u.column];if(0===l)break;var p={pos:r,source:u,dest:s,piece:l,promote:i.isPromoted};c.push(p),r=H(p),o=o+1|0}}catch(m){}var f=new Map;return Object.entries(a.values).forEach((function(e){var t=Object(D.a)(e,2),n=t[0],r=t[1];return f.set(n,r)})),{id:_.a.generate(),values:f,score:a.score*t.pos.turn,moves:c}})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setPosition",value:function(){var e=Object(N.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={pos:t.pos.map((function(e){return e.slice().reverse()})),cap0:t.cap0,cap1:t.cap1,turn:t.turn,moveCount:t.moveCount},e.next=3,this.post("position/set",n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(N.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.buildUrl(t,!0);case 2:return n=e.sent,e.next=5,F.a.get(n);case 5:return r=e.sent,e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(N.a)(C.a.mark((function e(t,n){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.buildUrl(t,!0);case 2:return r=e.sent,e.next=5,F.a.post(r,n,{headers:{"Content-Type":"application/json"}});case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"buildUrl",value:function(){var e=Object(N.a)(C.a.mark((function e(t,n){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(e){return encodeURIComponent(e)},a=n?"?".concat(this.engineNameKey,"=").concat(r(this.engineName)):"",e.abrupt("return","".concat(this.serverURL,"/").concat(t).concat(a));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"e",value:function(e){return encodeURIComponent(e)}},{key:"engineName",set:function(e){this._engineName=e},get:function(){if(!this._engineName)throw new Error("engineName is not defined.");return this._engineName}},{key:"serverURL",set:function(e){this._serverURL=e},get:function(){if(!this._serverURL)throw new Error("serverURL is not defined. serverURL");return this._serverURL}}]),e}(),le=(X=function(){function e(){Object(T.a)(this,e),Object(S.a)(this,"names",Y,this),Object(S.a)(this,"current",Z,this),Object(S.a)(this,"options",ee,this),Object(S.a)(this,"state",te,this),Object(S.a)(this,"result",ne,this),Object(S.a)(this,"serverURL",re,this)}return Object(R.a)(e,[{key:"setNames",value:function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.names=t;case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setState",value:function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.state=t;case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.names.includes(t)){e.next=2;break}throw new Error("Unknown engine name. name="+t);case 2:return this.current=t,e.prev=3,this.setState(1),e.next=7,this.sbclient.connect();case 7:return e.next=9,this.sbclient.getOptions();case 9:this.options=e.sent,this.setState(2),e.next=19;break;case 13:return e.prev=13,e.t0=e.catch(3),console.error("Failed to connect",e.t0),alert("\u63a5\u7d9a\u306b\u5931\u6557\u3057\u307e\u3057\u305f"),e.next=19,this.disconnect();case 19:case"end":return e.stop()}}),e,this,[[3,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=Object(N.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.sbclient.close();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("\u63a5\u7d9a\u89e3\u9664\u306b\u5931\u6557\u3057\u307e\u3057\u305f",e.t0);case 8:return e.prev=8,this.current=null,this.options=null,this.state=0,e.finish(8);case 13:case"end":return e.stop()}}),e,this,[[0,5,8,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"startThinking",value:function(){var e=Object(N.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.current){e.next=2;break}throw new Error("[startThinking] current engine is not set");case 2:return e.next=4,this.sbclient.start();case 4:return e.next=6,this.setState(4);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stopThinking",value:function(){var e=Object(N.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.current){e.next=2;break}throw new Error("[stopThinking] current engine is not set");case 2:if(4===this.state){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.sbclient.stop();case 6:return e.next=8,this.setState(3);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setResult",value:function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.result=t;case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updatePosition",value:function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sbclient.setPosition(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setServerURL",value:function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.serverURL=t;case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sbclient",get:function(){return new se(this.current||"",this.serverURL)}}]),e}(),Y=Object(P.a)(X.prototype,"names",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Z=Object(P.a)(X.prototype,"current",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=Object(P.a)(X.prototype,"options",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=Object(P.a)(X.prototype,"state",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ne=Object(P.a)(X.prototype,"result",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=Object(P.a)(X.prototype,"serverURL",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(P.a)(X.prototype,"sbclient",[M.computed],Object.getOwnPropertyDescriptor(X.prototype,"sbclient"),X.prototype),Object(P.a)(X.prototype,"setNames",[M.action],Object.getOwnPropertyDescriptor(X.prototype,"setNames"),X.prototype),Object(P.a)(X.prototype,"setState",[M.action],Object.getOwnPropertyDescriptor(X.prototype,"setState"),X.prototype),Object(P.a)(X.prototype,"connect",[M.action],Object.getOwnPropertyDescriptor(X.prototype,"connect"),X.prototype),Object(P.a)(X.prototype,"disconnect",[M.action],Object.getOwnPropertyDescriptor(X.prototype,"disconnect"),X.prototype),Object(P.a)(X.prototype,"startThinking",[M.action],Object.getOwnPropertyDescriptor(X.prototype,"startThinking"),X.prototype),Object(P.a)(X.prototype,"stopThinking",[M.action],Object.getOwnPropertyDescriptor(X.prototype,"stopThinking"),X.prototype),Object(P.a)(X.prototype,"setResult",[M.action],Object.getOwnPropertyDescriptor(X.prototype,"setResult"),X.prototype),Object(P.a)(X.prototype,"setServerURL",[M.action],Object.getOwnPropertyDescriptor(X.prototype,"setServerURL"),X.prototype),X);function pe(e){return"branches"in e}function fe(e,t,n){var r=e.moves.length-1,a=e.moves[r],o=e.moves.slice(0,r),c=t<=r?0:t-r;return{moves:pe(a)?o.concat(function(e,t,n){var r=0===t&&void 0!==n?n:e.index;return 0===t?{branches:e.branches.map((function(e){return fe(e,0)})),index:r}:{branches:e.branches.map((function(r,a){return a===e.index?fe(r,t,n):r})),index:r}}(a,c,n)):e.moves.slice(),index:t<=r?t:r}}var me=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d"],ve=["\uff11","\uff12","\uff13","\uff14","\uff15","\uff16","\uff17","\uff18","\uff19"];function he(e){return me[e]}function be(e){return ve[e]}function de(e,t){var n=e.source,r=e.dest,a=e.piece,o=e.promote,c=function(e){var t=Math.abs(e);if(1===t)return"\u6b69";if(2===t)return"\u9999";if(3===t)return"\u6842";if(4===t)return"\u9280";if(5===t)return"\u91d1";if(6===t)return"\u89d2";if(7===t)return"\u98db";if(8===t)return"\u7389";if(11===t)return"\u3068";if(12===t)return"\u6210\u9999";if(13===t)return"\u6210\u6842";if(14===t)return"\u6210\u9280";if(16===t)return"\u99ac";if(17===t)return"\u9f8d";throw new Error("Failed to ident piece name. received: "+e)}(o?q(a):a),i=he(r.row),u=be(r.column);if(-1===n.row)return"".concat(u).concat(i).concat(c,"\u6253");var s=n.row+1,l=n.column+1;return"".concat(u).concat(i).concat(c).concat(!0===o?"\u6210":!1!==o?"":!t||J({sourceRow:n.row,destRow:r.row,piece:a})?"\u4e0d\u6210":"","(").concat(l).concat(s,")")}function we(e,t){var n=e.index===e.moves.length-1,r=e.moves[e.index];if(n&&pe(r))return{moves:e.moves.slice(0,e.moves.length-1).concat(ke(r,t,!0)),index:e.index};var a=e.index+1;if(n)return{moves:e.moves.concat(t),index:a};var o=e.moves[a],c=e.moves.slice(0,a);if(pe(o))return{moves:c.concat(ke(o,t,!1)),index:a};if(Oe(t,o))return{moves:e.moves.slice(),index:a};var i=e.moves.slice(a,e.moves.length);return{moves:c.concat(ye(i,t)),index:a}}function ke(e,t,n){if(n)return{branches:e.branches.map((function(n,r){return r===e.index?we(n,t):n})),index:e.index};var r=e.branches.findIndex((function(e){return Oe(e.moves[0],t)}));return-1!==r?{branches:e.branches.slice(),index:r}:{branches:e.branches.concat(ge([t])),index:e.branches.length}}function ye(e,t){return{branches:[ge(e),ge([t])],index:1}}function ge(e){return{moves:e,index:0}}function Oe(e,t){return e.index===t.index&&e.source.row===t.source.row&&e.source.column===t.source.column&&e.dest.row===t.dest.row&&e.dest.column===t.dest.column&&e.piece===t.piece&&e.promote===t.promote}var je=function(e,t,n){for(var r=[],a=0;a<9;a++)if(!t||!t.includes(a))for(var o=0;o<9;o++){n&&n.includes(o)||0!==e[a][o]||r.push({row:a,column:o})}return r},Ee=function(e,t,n){for(var r=[],a=0;a<t.length;a++){var o=t[a][0],c=t[a][1];o>=0&&o<=8&&c>=0&&c<=8&&e[o][c]*n<=0&&r.push({row:o,column:c})}return r};function xe(e,t){return e.row-t.row||e.column-t.column}function Ce(e,t){for(var n=e.length>>1,r=0,a=e.length-1;r<=a;){if(e[n].row===t.row&&e[n].column===t.column)return n;e[n].row<t.row?r=n+1:e[n].row>t.row?a=n-1:e[n].column<t.column?r=n+1:a=n-1,n=r+(a-r>>1)}return-1}var Ne,Se,Te,Re,Pe,Me,Le=function(e,t,n,r,a,o,c){for(;0<=t&&t<=8&&0<=n&&n<=8;){var i=e[t][n];if(i*r>0)break;if(a.push({row:t,column:n}),i*r<0)break;t+=o,n+=c}},Ue=function(e,t){if(!t.piece||7!==t.piece&&-7!==t.piece)throw new Error("Called validation for hisha, but piece id was not hisha.");if(-1===t.row&&-1===t.column)return je(e.pos);for(var n=[[-1,0],[0,-1],[0,1],[1,0]],r=[],a=0;a<n.length;a++)Le(e.pos,t.row+n[a][0],t.column+n[a][1],t.piece,r,n[a][0],n[a][1]);return r.sort(xe),r},Ie=function(e,t){if(!t.piece||6!==t.piece&&-6!==t.piece)throw new Error("Called validation for kaku, but piece id was not kaku.");if(-1===t.row&&-1===t.column)return je(e.pos);for(var n=[[-1,-1],[-1,1],[1,-1],[1,1]],r=[],a=0;a<n.length;a++)Le(e.pos,t.row+n[a][0],t.column+n[a][1],t.piece,r,n[a][0],n[a][1]);return r.sort(xe),r},Ve=function(e,t){var n=t.piece;if(0===n)throw new Error("Cannot get targets to move for empty cell.");if(1===n||-1===n)return function(e,t){if(!t.piece||1!==t.piece&&-1!==t.piece)throw new Error("Called validation for fu, but piece id was not fu.");for(var n=[],r=0;r<9;r++)for(var a=0;a<9;a++)if(e.pos[a][r]===t.piece){n.push(r);break}if(-1===t.row&&-1===t.column){var o=t.piece>0?0:8;return je(e.pos,[o],n)}var c=t.piece>0?t.row-1:t.row+1;return c<0||c>8||e.pos[c][t.column]*t.piece>0?[]:[{row:c,column:t.column}]}(e,t);if(2===n||-2===n)return function(e,t){if(!t.piece||2!==t.piece&&-2!==t.piece)throw new Error("Called validation for kyou, but piece id was not kyou.");if(-1===t.row&&-1===t.column){var n=t.piece>0?0:8;return je(e.pos,[n])}var r=t.piece>0?-1:1,a=[];return Le(e.pos,t.row+r,t.column,t.piece,a,r,0),t.piece>0&&a.reverse(),a}(e,t);if(3===n||-3===n)return function(e,t){if(!t.piece||3!==t.piece&&-3!==t.piece)throw new Error("Called validation for kei, but piece id was not kei.");if(-1===t.row&&-1===t.column){var n=t.piece>0?0:8,r=t.piece>0?n+1:n-1;return je(e.pos,[n,r])}var a=t.piece>0?t.row-2:t.row+2;if(a<0||a>8)return[];var o=[[a,t.column-1],[a,t.column+1]];return Ee(e.pos,o,t.piece)}(e,t);if(4===n||-4===n)return function(e,t){if(!t.piece||4!==t.piece&&-4!==t.piece)throw new Error("Called validation for gin, but piece id was not gin.");if(-1===t.row&&-1===t.column)return je(e.pos);var n=t.piece>0?[[t.row-1,t.column-1],[t.row-1,t.column],[t.row-1,t.column+1],[t.row+1,t.column-1],[t.row+1,t.column+1]]:[[t.row-1,t.column-1],[t.row-1,t.column+1],[t.row+1,t.column-1],[t.row+1,t.column],[t.row+1,t.column+1]];return Ee(e.pos,n,t.piece)}(e,t);if(5===n||-5===n||11===n||-11===n||12===n||-12===n||13===n||-13===n||14===n||-14===n)return function(e,t){if(!t.piece||5!==t.piece&&-5!==t.piece&&11!==t.piece&&-11!==t.piece&&12!==t.piece&&-12!==t.piece&&13!==t.piece&&-13!==t.piece&&14!==t.piece&&-14!==t.piece)throw new Error("Called validation for kin(or promoted piece moves as same as kin), but piece id was not as expected.");if(-1===t.row&&-1===t.column)return je(e.pos);var n=t.piece>0?[[t.row-1,t.column-1],[t.row-1,t.column],[t.row-1,t.column+1],[t.row,t.column-1],[t.row,t.column+1],[t.row+1,t.column]]:[[t.row-1,t.column],[t.row,t.column-1],[t.row,t.column+1],[t.row+1,t.column-1],[t.row+1,t.column],[t.row+1,t.column+1]];return Ee(e.pos,n,t.piece)}(e,t);if(6===n||-6===n)return Ie(e,t);if(7===n||-7===n)return Ue(e,t);if(8===n||-8===n)return function(e,t){if(!t.piece||8!==t.piece&&-8!==t.piece)throw new Error("Called validation for gyoku, but piece id was not gyoku.");if(-1===t.row&&-1===t.column)throw new Error("Gyoku must not be captured");var n=[[t.row-1,t.column-1],[t.row-1,t.column],[t.row-1,t.column+1],[t.row,t.column-1],[t.row,t.column+1],[t.row+1,t.column-1],[t.row+1,t.column],[t.row+1,t.column+1]];return Ee(e.pos,n,t.piece)}(e,t);if(16===n||-16===n)return function(e,t){if(!t.piece||16!==t.piece&&-16!==t.piece)throw new Error("Called validation for uma, but piece id was not uma.");if(-1===t.row||-1===t.column)throw new Error("Uma must not be captured");var n=[[t.row-1,t.column],[t.row,t.column-1],[t.row,t.column+1],[t.row+1,t.column]],r={row:t.row,column:t.column,piece:q(t.piece)},a=Ie(e,r),o=Ee(e.pos,n,t.piece).concat(a);return o.sort(xe),o}(e,t);if(17===n||-17===n)return function(e,t){if(!t.piece||17!==t.piece&&-17!==t.piece)throw new Error("Called validation for ryu, but piece id was not ryu.");if(-1===t.row||-1===t.column)throw new Error("Ryu must not be captured");var n=[[t.row-1,t.column-1],[t.row-1,t.column+1],[t.row+1,t.column-1],[t.row+1,t.column+1]],r={row:t.row,column:t.column,piece:q(t.piece)},a=Ue(e,r),o=Ee(e.pos,n,t.piece).concat(a);return o.sort(xe),o}(e,t);throw new Error("Could not get targets to move. Got invalid piece ID")},De=function(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<e.length;r++){var a=e[n][r];if(8===Math.abs(a)&&a*t>0)return{row:n,column:r,piece:a}}};function ze(e,t,n,r){for(var a=0;a<e.pos.length;a++)for(var o=0;o<e.pos.length;o++){var c=e.pos[a][o];if(!(c*n<=0))if(-1!==Ce(Ve(e,{row:a,column:o,piece:c}),t)){if(r||8!==Math.abs(c)||t.piece&&8===Math.abs(t.piece))return!0;if(!ze($({pos:e,source:{row:a,column:o},dest:{row:t.row,column:t.column},piece:c}),t,-n,!0))return!0}}return!1}var Fe,Be,Ae,Ke,_e,We=(Ne=function(){function e(){Object(T.a)(this,e),Object(S.a)(this,"indexes",Se,this),Object(S.a)(this,"selected",Te,this),Object(S.a)(this,"confirm",Re,this),Object(S.a)(this,"moveTargets",Pe,this),Object(S.a)(this,"kif",Me,this)}return Object(R.a)(e,[{key:"reverse",value:function(){this.indexes=this.indexes.slice().reverse()}},{key:"clickPiece",value:function(e){var t=this,n=this.selected,r=this.currentMove.pos.turn;if(!this.confirm||!Ge(e.clicked)){if(n&&Ge(e.clicked)&&function(e,t){return e.row===t.row&&e.column===t.column&&e.piece===t.clicked&&e.i===t.i}(n,e))return this.selected=null,void(this.moveTargets=[]);if(Ge(e.clicked)&&function(e,t){return e<0&&-1===t||e>0&&1===t}(e.clicked,r)){var a={row:e.row,column:e.column,piece:e.clicked,i:e.i};this.selected=a;var o=Ve(this.currentMove.pos,a),c=function e(t,n,r){if(!n.piece)throw new Error("piece id is needed");for(var a=n.piece>0?1:-1,o=De(t.pos,a),c=[],i=0;i<r.length;i++){var u=$({pos:t,source:{row:n.row,column:n.column},dest:{row:r[i].row,column:r[i].column},piece:n.piece});if(n.piece&&8===Math.abs(n.piece)&&(o=De(u.pos,a)),!(void 0!==o&&ze(u,o,-a))){var s=1===Math.abs(n.piece),l=-1===n.row,p=De(u.pos,-a);if(s&&l&&void 0!==p&&ze(u,p,a)){var f=ze(u,r[i],-a),m=e(u,p,Ve(u,p));if(!f&&0===m.length)continue}c.push(r[i])}}return c}(this.currentMove.pos,a,o);this.moveTargets=c}else{if(n&&n.piece)if(-1!==Ce(this.moveTargets,e)){var i={row:n.row,column:n.column},u={row:e.row,column:e.column},s=function(e,n){var r,a,o={pos:t.currentMove.pos,source:i,dest:u,piece:e,promote:n},c=H(o),s=de(o),l={index:t.currentMove.index+1,str:s,pos:c,source:i,dest:u,piece:e,promote:n};t.selected=null,t.confirm=null,t.moveTargets=[],t.kif=(r=t.kif,a=l,{meta:r.meta,history:we(r.history,a)})};if(Ge(e.clicked)){var l=J({sourceRow:n.row,destRow:e.row,piece:n.piece}),p=function(e,t){return(1===e||2===e)&&0===t||(-1===e||-2===e)&&8===t||3===e&&(0===t||1===t)||-3===e&&(8===t||7===t)}(n.piece,e.row);if(!l||p)s(p?G(n.piece):n.piece,p||void 0);else this.confirm={promoted:G(n.piece),preserved:n.piece,row:e.row,column:e.column}}else{s(e.promote?e.clicked.promoted:e.clicked.preserved,!0===e.promote)}}}}}},{key:"clickKif",value:function(e,t){var n,r,a;this.confirm||(this.kif=(n=this.kif,r=e,a=t,{meta:n.meta,history:fe(n.history,r,a)}),this.selected=null,this.moveTargets=[])}},{key:"currentMove",get:function(){return function(e){for(var t=e.history,n=t.moves[t.index];pe(n);)n=(t=n.branches[n.index]).moves[t.index];return n}(this.kif)}}]),e}(),Se=Object(P.a)(Ne.prototype,"indexes",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[-1,0,1,2,3,4,5,6,7,8,9]}}),Te=Object(P.a)(Ne.prototype,"selected",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Re=Object(P.a)(Ne.prototype,"confirm",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pe=Object(P.a)(Ne.prototype,"moveTargets",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Me=Object(P.a)(Ne.prototype,"kif",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e={pos:[[-2,-3,-4,-5,-8,-5,-4,-3,-2],[0,-6,0,0,0,0,0,-7,0],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1,1],[0,7,0,0,0,0,0,6,0],[2,3,4,5,8,5,4,3,2]],cap0:[0,0,0,0,0,0,0],cap1:[0,0,0,0,0,0,0],turn:1,moveCount:0};return{meta:{version:"1",player:{sente:"",gote:""},handicap:"\u5e73\u624b",initPos:e},history:{moves:[{index:0,str:"\u958b\u59cb\u5c40\u9762",pos:e,source:{row:0,column:0},dest:{row:0,column:0},piece:0}],index:0}}}()}}),Object(P.a)(Ne.prototype,"currentMove",[M.computed],Object.getOwnPropertyDescriptor(Ne.prototype,"currentMove"),Ne.prototype),Object(P.a)(Ne.prototype,"reverse",[M.action],Object.getOwnPropertyDescriptor(Ne.prototype,"reverse"),Ne.prototype),Object(P.a)(Ne.prototype,"clickPiece",[M.action],Object.getOwnPropertyDescriptor(Ne.prototype,"clickPiece"),Ne.prototype),Object(P.a)(Ne.prototype,"clickKif",[M.action],Object.getOwnPropertyDescriptor(Ne.prototype,"clickKif"),Ne.prototype),Ne);function Ge(e){return"number"===typeof e}var qe=(Fe=function(){function e(){var t=this;Object(T.a)(this,e),Object(S.a)(this,"gameState",Be,this),Object(S.a)(this,"engineState",Ae,this),Object(S.a)(this,"displayState",Ke,this),Object(S.a)(this,"config",_e,this),this.engineState.setServerURL(this.config.serverURL),Object(M.observe)(this.gameState,"currentMove",(function(e){return t.updatePosition(e.newValue)})),Object(M.observe)(this.config,"serverURL",(function(e){return t.engineState.setServerURL(e.newValue)}))}return Object(R.a)(e,[{key:"updatePosition",value:function(){var e=Object(N.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.engineState.state>=2){e.next=3;break}return e.abrupt("return");case 3:n=t||this.gameState.currentMove,this.engineState.updatePosition(n.pos);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Be=Object(P.a)(Fe.prototype,"gameState",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new We}}),Ae=Object(P.a)(Fe.prototype,"engineState",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new le}}),Ke=Object(P.a)(Fe.prototype,"displayState",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new V}}),_e=Object(P.a)(Fe.prototype,"config",[M.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new I}}),Fe),Je=Object(y.createContext)(new qe),He=(n(68),n(69),Object(E.a)((function(){var e=g.a.useContext(Je).engineState.result;if(!e)return g.a.createElement("div",null);var t=e.map((function(e){var t=e.moves.map((function(e,t){var n=de(e,!0);return g.a.createElement("div",{key:t,className:"EngineInfoRowContent"},n)}));return g.a.createElement("div",{key:e.id,className:"EngineInfoColumn"},g.a.createElement("div",{className:"EngineInfoRow EngineInfoRowContainer"},g.a.createElement("div",{className:"EngineInfoRowLabel"},"score"),g.a.createElement("div",{className:"EngineInfoRowContent Center"},e.score)),g.a.createElement("div",{className:"EngineInfoRow EngineInfoRowContainer"},g.a.createElement("div",{className:"EngineInfoRowLabel"},"\u8aad\u307f"),t))}));return g.a.createElement(g.a.Fragment,null,t)}))),$e=(n(70),function(){return g.a.createElement("div",{className:"EngineSideInfo"},g.a.createElement("div",{className:"EngineSideInfoContainer"},g.a.createElement(He,null)))}),Qe=(n(71),function(e){var t=r(0,0,20,20),n=r(20,0,0,20);return g.a.createElement("div",{onClick:function(){return e.onClick()}},g.a.createElement("svg",{width:20,height:20,className:"MockupCloseButton"},t,n));function r(e,t,n,r){return g.a.createElement("line",{x1:e,y1:t,x2:n,y2:r,stroke:"black",strokeWidth:"2"})}}),Xe=n(33),Ye=n.n(Xe),Ze=(n(72),n(73),Object(E.a)((function(e){return g.a.createElement("button",{className:"FormButton",onClick:function(){return e.onClick()}},e.label)}))),et=(n(74),Object(E.a)((function(e){var t=Array.from(e.buttons).map((function(t){var n=Object(D.a)(t,2),r=n[0],a=n[1];return g.a.createElement(Ze,{key:r,label:r,onClick:function(){return e.sbclient.updateButton(a)}})}));return g.a.createElement("div",{className:"OptionButton"},t)}))),tt=(n(75),Object(E.a)((function(e){var t=e.label,n=e.value,r=e.name,a="FormCheck-".concat(r);return g.a.createElement("div",{className:"FormCheck"},g.a.createElement("span",null,t),g.a.createElement("div",{className:"FormCheckToggle"},g.a.createElement("input",{id:a,name:a,type:"checkbox",onChange:function(t){return e.onChange(t.target.checked)},checked:n}),g.a.createElement("label",{htmlFor:a},g.a.createElement("div",{className:"ToggleSwitch","data-checked":"ON","data-unchecked":"OFF"}))))}))),nt=Object(E.a)((function(e){var t=Array.from(e.checks).map((function(t){var n=Object(D.a)(t,2),r=n[0],a=n[1];return g.a.createElement(tt,{key:r,label:r,name:r,value:a.value,onChange:function(t){return a.setValue(t),e.sbclient.updateCheck(a)}})}));return g.a.createElement("div",null,t)})),rt=Object(E.a)((function(e){var t=e.option,n=t.name,r=t.value,a=t.inputValue,o=t.min,c=t.max,i="FormTextInput"+(r.toString()===a?"":"FormTextInvalid"),u="".concat(n,"(").concat(o,"~").concat(c,")");return g.a.createElement("div",{className:"FormText"},g.a.createElement("input",{className:i,type:"text",value:a,placeholder:" ",onChange:function(t){var n=e.option,r=e.sbclient;return n.setValue(t.target.value),r.updateRange(n)},required:!0,min:o,max:c}),g.a.createElement("label",null,u))})),at=Object(E.a)((function(e){var t=e.ranges,n=e.sbclient,r=Array.from(t).map((function(e){var t=Object(D.a)(e,2),r=t[0],a=t[1];return g.a.createElement(rt,{key:r,option:a,sbclient:n})}));return g.a.createElement("div",null,r)})),ot=(n(76),Object(E.a)((function(e){var t=e.label,n=e.value,r=e.options.map((function(e,t){return g.a.createElement("option",{key:t,value:e},e)}));return g.a.createElement("div",{className:"FormSelectContainer"},g.a.createElement("label",null,t),g.a.createElement("div",{className:"FormSelect SelectTriangle"},g.a.createElement("select",{onChange:function(t){e.onChange(t.target.value)},value:n,required:!0},r)))}))),ct=Object(E.a)((function(e){var t=Array.from(e.selects).map((function(t){var n=Object(D.a)(t,2),r=n[0],a=n[1];return g.a.createElement(ot,{key:r,label:r,value:a.value,options:a.vars,onChange:function(t){return a.setValue(t),e.sbclient.updateSelect(a)}})}));return g.a.createElement("div",null,t)})),it=(n(77),Object(E.a)((function(e){var t=e.value,n=e.label,r=e.allowEmpty,a=e.placeholder,o=["FormTextInput"];r||""!==t||o.push("FormTextInvalid");var c=o.join(" ");return g.a.createElement("div",{className:"FormText"},g.a.createElement("input",{className:c,type:"text",value:t,placeholder:a||" ",onChange:function(t){e.onChange(t.target.value)},required:!0}),g.a.createElement("label",null,n))}))),ut=Object(E.a)((function(e){var t=Array.from(e.texts).map((function(t){var n=Object(D.a)(t,2),r=n[0],a=n[1];return g.a.createElement(it,{key:r,label:r,value:a.value,onChange:function(t){return a.setValue(t),e.sbclient.updateText(a)}})}));return g.a.createElement("div",null,t)})),st=Object(E.a)((function(){var e=g.a.useContext(Je),t=e.gameState,n=e.displayState,r=e.engineState,a=r.current,o=r.options,c=r.sbclient;if(!a||!o)return g.a.createElement("div",null);var i=o.buttons,u=o.checks,s=o.ranges,l=o.selects,p=o.texts,f=g.a.createElement("button",{className:"ButtonDisconnect",onClick:function(){return r.disconnect()}},"\u63a5\u7d9a\u89e3\u9664"),m=g.a.createElement("button",{className:"ButtonStartThinking",onClick:function(){return r.startThinking().then((function(){return n.closeMockup()})).then(v).catch((function(e){return console.error(e)}))}},"\u601d\u8003\u958b\u59cb");return g.a.createElement("div",{className:"DetailContainer"},g.a.createElement("h1",{className:"EngineName"},a),f,m,g.a.createElement("h2",{className:"EngineOption"},"\u30aa\u30d7\u30b7\u30e7\u30f3"),g.a.createElement(et,{buttons:i,sbclient:c}),g.a.createElement(nt,{checks:u,sbclient:c}),g.a.createElement(at,{ranges:s,sbclient:c}),g.a.createElement(ct,{selects:l,sbclient:c}),g.a.createElement(ut,{texts:p,sbclient:c}),f,m);function v(){return Ye()(function(){var e=Object(N.a)(C.a.mark((function e(n,a){var o,c,i,u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r.current,c=r.state,i=r.sbclient,o&&4===c){e.next=4;break}return a(),e.abrupt("return");case 4:return e.prev=4,e.next=7,i.getResult(t.currentMove);case 7:return u=e.sent,e.next=10,r.setResult(u);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,n){return e.apply(this,arguments)}}(),1e3)}})),lt=(n(78),function(){return g.a.createElement("div",{className:"Loader sk-fading-circle"},g.a.createElement("div",{className:"sk-circle1 sk-circle"}),g.a.createElement("div",{className:"sk-circle2 sk-circle"}),g.a.createElement("div",{className:"sk-circle3 sk-circle"}),g.a.createElement("div",{className:"sk-circle4 sk-circle"}),g.a.createElement("div",{className:"sk-circle5 sk-circle"}),g.a.createElement("div",{className:"sk-circle6 sk-circle"}),g.a.createElement("div",{className:"sk-circle7 sk-circle"}),g.a.createElement("div",{className:"sk-circle8 sk-circle"}),g.a.createElement("div",{className:"sk-circle9 sk-circle"}),g.a.createElement("div",{className:"sk-circle10 sk-circle"}),g.a.createElement("div",{className:"sk-circle11 sk-circle"}),g.a.createElement("div",{className:"sk-circle12 sk-circle"}))}),pt=(n(79),Object(E.a)((function(){var e=g.a.useContext(Je),t=e.engineState,n=Object(y.useRef)(t),r=t.names,a=t.current,o=t.state;if(Object(y.useEffect)((function(){var e=n.current;e.sbclient.init().then((function(t){return e.setNames(t)})).catch((function(t){var n=["\u63a5\u7d9a\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u4ee5\u4e0b\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002","1. \u30b5\u30fc\u30d0\u30fc\u304c\u8d77\u52d5\u3057\u3066\u3044\u308b\u304b","2. \u30b5\u30fc\u30d0\u30fc\u306eURL\u304c\u6b63\u3057\u3044\u304b","3. \u30b5\u30fc\u30d0\u30fc\u306e\u30ed\u30b0\u3092\u78ba\u8a8d\u3057\u3001\u30a8\u30e9\u30fc\u7b49\u304c\u51fa\u3066\u3044\u306a\u3044\u304b","4. \u30b5\u30fc\u30d0\u30fc\u3067\u5c06\u68cb\u30a8\u30f3\u30b8\u30f3\u306e\u5b9f\u884c\u30d1\u30b9\u3092\u8a2d\u5b9a\u3057\u305f\u304b","5. \u5c06\u68cb\u30a8\u30f3\u30b8\u30f3\u304c\u5b9f\u884c\u53ef\u80fd\u3067\u3042\u308b\u304b"].join("\n");console.error(t),e.disconnect(),alert(n)}))}),[]),0===r.length)return g.a.createElement("div",{className:"ListEngineName"},g.a.createElement("span",null,"\u5229\u7528\u53ef\u80fd\u306a\u5c06\u68cb\u30a8\u30f3\u30b8\u30f3\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u305b\u3093"));var c=r.map((function(e,t){var n=e===a&&1===o?g.a.createElement(lt,null):void 0;return g.a.createElement("div",{className:"ListEngineName",key:t,onClick:function(){return function(e,t){return i.apply(this,arguments)}(e,o)}},n,g.a.createElement("span",null,e))}));return g.a.createElement(g.a.Fragment,null,c);function i(){return(i=Object(N.a)(C.a.mark((function n(r,a){return C.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(0===a){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,t.connect(r);case 4:return n.next=6,e.updatePosition().catch((function(e){return console.error(e)}));case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}}))),ft=Object(E.a)((function(){var e=g.a.useContext(Je),t=e.engineState,n=e.displayState,r=t.state,a=0===r||1===r?g.a.createElement(pt,null):g.a.createElement(st,null);return g.a.createElement("div",{className:"Mockup"},g.a.createElement(Qe,{onClick:function(){return n.setMockupState(1)}}),a)})),mt=Object(E.a)((function(){var e=g.a.useContext(Je),t=e.config,n=e.displayState,r=t.paintTargets,a=t.serverURL,o=t.saveToCookie;return g.a.createElement("div",{className:"Mockup"},g.a.createElement(Qe,{onClick:function(){return n.setMockupState(1)}}),g.a.createElement("h1",null,"\u8a2d\u5b9a"),g.a.createElement(it,{label:"shogi-board-server \u306e URL",value:a,allowEmpty:!0,onChange:function(e){return t.setServerURL(e)},placeholder:"(\u4f8b)http://localhost:8080"}),g.a.createElement(tt,{label:"\u99d2\u304c\u79fb\u884c\u3067\u304d\u308b\u30de\u30b9\u306b\u8272\u3092\u4ed8\u3051\u308b",value:r,name:"PaintTargets",onChange:function(e){return t.setPaintTargets(e)}}),g.a.createElement(tt,{label:"Cookie \u306b\u8a2d\u5b9a\u3092\u4fdd\u5b58\u3059\u308b",value:o,name:"SaveToCookie",onChange:function(e){return t.setSaveToCookie(e)}}))}));n(80),n(81);function vt(e){return 0<=e&&e<=8}var ht=Object(E.a)((function(e){var t=g.a.useContext(Je),n=t.gameState,r=t.config,a=n.indexes,o=n.selected,c=n.confirm,i=n.currentMove,u=n.moveTargets,s=e.row,l=e.column,p=function(){return vt(s)&&vt(l)?n.currentMove.pos.pos[s][l]:0},f=p(),m=i.pos.turn,v=f>0&&1===m||f<0&&-1===m,h=r.paintTargets&&-1!==Ce(u,{row:s,column:l}),b=function(e){e.confirm&&e.sel&&(e.r===e.sel.row&&e.c===e.sel.column||e.r===e.confirm.row&&e.c===e.confirm.column)&&(e.p=0);var t=vt(e.r),n=vt(e.c),r=t&&(!e.rv&&8===e.c||e.rv&&0===e.c),a=n&&(!e.rv&&0===e.r||e.rv&&8===e.r),o=!e.rv&&(2===e.r&&6===e.c||2===e.r&&3===e.c||5===e.r&&6===e.c||5===e.r&&3===e.c)||e.rv&&(6===e.r&&2===e.c||6===e.r&&5===e.c||3===e.r&&2===e.c||3===e.r&&5===e.c),c=t&&n&&!!e.sel&&e.sel.row===e.r&&e.sel.column===e.c,i=t&&n?"Piece Piece-Bordered ":"",u=e.p&&e.rv?-1*e.p:e.p,s=u?"Piece-".concat(u," "):"",l=e.isTurn?"Piece-Turn ":"",p=c?"Piece-Selected ":"",f=e.isTargeted?"Piece-Targeted ":"",m=r?"Piece-Left ":"",v=a?"Piece-Top ":"",h=-1===e.c&&t||-1===e.r&&n?"Cell-EdgeText ":"",b=o?"Piece-Star":"";return"Cell ".concat(i).concat(s).concat(l).concat(p).concat(f).concat(m).concat(v).concat(h).concat(b)}({r:s,c:l,rv:9===a[0],p:f,sel:o,confirm:c,isTurn:v,isTargeted:h});return g.a.createElement("div",{className:b,onClick:function(){return d()}},function(e){if(!e||e.row!==s||e.column!==l)return;var t=9===a[0],n=t&&e.preserved>0||!t&&e.preserved<0,r="Piece-Confirm Piece-Confirm"+Number(n);return g.a.createElement("div",{className:r},g.a.createElement("div",{className:"Piece-Confirm-Promote",onClick:function(){return d(e,!0)}}),g.a.createElement("div",{className:"Piece-Confirm-Preserve",onClick:function(){return d(e)}}))}(c),function(){if(vt(l)&&-1===s)return g.a.createElement("span",null,be(l))}(),function(){if(vt(s)&&-1===l)return g.a.createElement("span",null,he(s))}());function d(e,t){if(!c||e){var r={clicked:e||p(),row:s,column:l,promote:t};n.clickPiece(r)}}})),bt=Object(E.a)((function(){var e=g.a.useContext(Je),t=e.gameState,n=e.displayState,r=t.indexes,a=r.map((function(e){return r.slice().reverse().map((function(t){return g.a.createElement(ht,{key:10*e+t,row:e,column:t})}))}));return g.a.createElement("div",{className:"BoardContainer"},g.a.createElement("div",{className:"ResetPseudo"},g.a.createElement("div",{className:"Board"},a),function(){var e=n.mockup;if(2===e)return g.a.createElement(ft,null);if(4===e||3===e)return g.a.createElement(mt,null)}()))}));n(82);function dt(e){return e.history.moves.length<1?"":function e(t){return t.moves.map((function(t){return pe(t)?e(t.branches[t.index]):"".concat(t.index," ").concat(t.str)})).join("\n")}({moves:e.history.moves.slice(1),index:e.history.index})}n(83);var wt=Object(E.a)((function(){var e=g.a.useContext(Je),t=e.gameState,n=e.displayState,r=e.engineState,a=e.config,o=t.currentMove,c=t.kif,i=o.index,u=i-1<0?0:i-1,s=i+1,l=i-5<0?0:i-5,p=i+5,f=t.clickKif,m=function(){var e=Object(N.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.current,n=r.state,t&&4===n){e.next=5;break}return e.next=4,v();case 4:return e.abrupt("return",e.sent);case 5:return e.next=7,r.stopThinking();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return g.a.createElement("div",{className:"ButtonsContainer"},g.a.createElement("button",{className:"PrevOne",onClick:function(){return f(u)}},"\uff1c"),g.a.createElement("button",{className:"NextOne",onClick:function(){return f(s)}},"\uff1e"),g.a.createElement("button",{className:"PrevFive",onClick:function(){return f(l)}},"\uff1c 5"),g.a.createElement("button",{className:"NextFive",onClick:function(){return f(p)}},"5 \uff1e"),g.a.createElement("button",{className:"Reverse",onClick:function(){return t.reverse()}},"\u76e4\u9762\u53cd\u8ee2"),g.a.createElement("button",{className:"Copy","data-clipboard-text":dt(c)},"\u68cb\u8b5c\u30b3\u30d4\u30fc"),g.a.createElement("button",{className:"ConnectToEngine",onClick:m},4===r.state?"\u601d\u8003\u505c\u6b62":"\u5c06\u68cb\u30a8\u30f3\u30b8\u30f3"),g.a.createElement("button",{className:"Configuration",onClick:function(){return n.setMockupState(4)}},"\u8a2d\u5b9a"));function v(){return h.apply(this,arguments)}function h(){return(h=Object(N.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==a.serverURL){e.next=5;break}return console.log("here"),e.next=4,n.setMockupState(3);case 4:return e.abrupt("return",e.sent);case 5:return e.next=7,n.setMockupState(2);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}})),kt=(n(84),Object(E.a)((function(e){var t=g.a.useContext(Je).gameState,n=t.selected,r=t.currentMove,a=e.captures,o=e.isLeftSide,c=e.isTurn,i="Captures Captures"+Number(o);return g.a.createElement("div",{className:i},u("Hisha",7,a[6]),u("Kaku",6,a[5]),u("Kin",5,a[4]),u("Gin",4,a[3]),u("Kei",3,a[2]),u("Kyou",2,a[1]),u("Fu",1,a[0]));function u(e,a,i){var u=r.pos.turn,s=Array.from(Array(i).keys()).map((function(r){var s=c?function(e,t){return n&&n.piece&&-1===n.row&&-1===n.column&&Math.abs(n.piece)===e&&n.i===t?"Piece-Selected":""}(a,r):"",l=c?"Piece-Turn":"",p=o?-a:a,f=Number(o),m="Capture-".concat(a).concat(f).concat(i).concat(r+1),v="Piece Piece-".concat(p," ").concat(l," ").concat(s," ").concat(m),h="Cap-".concat(f,"-").concat(e,"-").concat(r);return g.a.createElement("div",{key:h,className:v,onClick:function(){if(c){var e=u*a;t.clickPiece({clicked:e,row:-1,column:-1,i:r})}}})})),l="Captures-Inner Captures-".concat(e);return g.a.createElement("div",{className:l},s)}}))),yt=(n(85),Object(E.a)((function(){var e=g.a.useContext(Je).gameState,t=e.indexes,n=e.currentMove.pos,r=n.turn,a=n.cap0,o=n.cap1,c=-1===t[0]?o:a,i=-1===t[0]?-1===r:1===r;return g.a.createElement("div",{className:"LeftSide"},g.a.createElement(kt,{isLeftSide:!0,captures:c,isTurn:i}),g.a.createElement("div",{className:"LeftInfo"},g.a.createElement("div",null),g.a.createElement(wt,null)))}))),gt=n(34);n(86);var Ot=Object(E.a)((function(){var e=g.a.useContext(Je).gameState;Object(y.useEffect)((function(){!function(e){var t=document.getElementById(e);t&&t.scrollIntoViewIfNeeded&&t.scrollIntoViewIfNeeded()}("Move-Current")}));var t=n(e.kif.history.moves,0);return g.a.createElement("div",{className:"KifContainer"},g.a.createElement("div",{className:"Kif-Inner"},t));function n(t,a){return t.flatMap((function(t,o){return pe(t)?function(t,a){for(var o=t.branches[t.index],c=Object(gt.a)(o.moves),i=c[0],u=c.slice(1),s=[],l=function(n){if(n===t.index)return"continue";var r=t.branches[n].moves[0],o="".concat(a,"-").concat(n),c="-- ".concat(r.str);s.push(g.a.createElement("div",{key:o,className:"Branch",onClick:function(){return e.clickKif(a,n)}},g.a.createElement("span",null,c)))},p=0;p<t.branches.length;p++)l(p);var f=0!==u.length?n(u,a+1):[];return[r(i,a)].concat(s).concat(f)}(t,a+o):r(t,a+o)}))}function r(t,n){var r=e.currentMove.index===n?"Move-Current":void 0;return g.a.createElement("div",{key:n,className:"Move",id:r,onClick:function(){return e.clickKif(n)}},g.a.createElement("div",{className:"Number code"},n+"."),g.a.createElement("div",{className:"MoveText"},t.str))}})),jt=(n(87),Object(E.a)((function(){var e=g.a.useContext(Je).gameState,t=e.indexes,n=e.currentMove.pos,r=n.turn,a=n.cap0,o=n.cap1,c=9===t[0]?o:a,i=9===t[0]?-1===r:1===r;return g.a.createElement("div",{className:"RightSide"},g.a.createElement("div",{className:"RightInfo"},g.a.createElement(Ot,null)),g.a.createElement(kt,{isLeftSide:!1,captures:c,isTurn:i}))}))),Et=function(){return g.a.createElement("div",{className:"BoardArea"},g.a.createElement(yt,null),g.a.createElement(bt,null),g.a.createElement(jt,null))},xt=Object(E.a)((function(){var e=4===g.a.useContext(Je).engineState.state,t="App App-"+(e?"SideInfo":"BoardOnly");return g.a.createElement("div",{className:t},g.a.createElement(Et,null),e?g.a.createElement($e,null):null)})),Ct=(n(88),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function Nt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}j.a.render(g.a.createElement(xt,null),document.getElementById("root")),new k.a(".Copy"),function(e){if("serviceWorker"in navigator){if(new URL("/shogi-board/playground",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/shogi-board/playground","/service-worker.js");Ct?(!function(e,t){fetch(e).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Nt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")}))):Nt(t,e)}))}}()}},[[35,1,2]]]);
//# sourceMappingURL=main.4ecef003.chunk.js.map